<!--description 完成状态-->
<div ng-controller="completedStateCtrl" class="query-wrap">
    <div class="tablist-details">
        <div class="position-relative query-table">

            <div class="tablist-bar">
                <div class="tablist-search">
                    <div class="display-iblock hand-border input-padding input-h input-w input-search">
                        <input class="hand-input" placeholder="请输入任务名称" ng-model="searchKey"
                               fun-Keyboard="{method:'dataSearch'}" ng-keyup="myKeyup($event)"/>
                        <fun-Icon id="msnui-find" ng-click="dataSearch()" class="search-icon"></fun-Icon>
                    </div>
                </div>

                <span class="ml30">任务状态：</span>
                <ui-select  class="dialog-input mr10" ng-model="searchState" ng-change="getSelectState(searchState)">
                    <ui-select-match placeholder="请选择">{{$select.selected.name}}</ui-select-match>
                    <ui-select-choices repeat="item in stateData | filter: $select.search">
                        <span ng-bind-html="item.name | highlight: $select.search"></span>
                    </ui-select-choices>
                </ui-select>

                <!--<div class="right_btn fr color-blue">-->
                    <!--<div class="cursor-pointer fr btn-border btn-delete color-blue ml10" ng-click="batchDelete()">-->
                        <!--<fun-Icon id="shanchu"></fun-Icon>-->
                        <!--<span>批量删除</span>-->
                    <!--</div>-->
                <!--</div>-->

            </div>
            <table ng-table="tableParams" class="table table-striped tablist operationTable">
                <thead>
                <tr>
                    <th>
                        <span class="checkBox file-checkbox">
                            <input type="checkbox" class="input_check" id="ckAllComSt" ng-model="isSelectAll"
                                    ng-click="selectAll(isSelectAll)"><label for="ckAllComSt"></label>
                        </span>
                    </th>
                    <th>执行ID</th>
                    <th>任务名称</th>
                    <th>任务类型</th>
                    <th>任务状态</th>
                    <th>脚本类型</th>
                    <th>开始时间</th>
                    <th>结束时间</th>
                    <!--<th>操作</th>-->
                </tr>
                </thead>
                <tbody>
                <tr ng-repeat="item in tabData">
                    <td style="width: 80px;">
                        <span class="checkBox file-checkbox">
                            <input type="checkbox" class="input_check"
                                id="{{'TaskCheck'+item.id}}" 
                                ng-model="selected[item.id]">
                            <label for="{{'TaskCheck'+item.id}}"></label>
                        </span>
                    </td>
                    <td ng-bind="item.execId"></td>
                    <td ng-bind="item.jobName"></td>
                    <td ng-bind="item.jobType"></td>
                    <td ng-bind="item.jobState"></td>
                    <td ng-bind="item.sqlType"></td>
                    <td ng-bind="item.startTime |date:'yyyy-MM-dd HH:mm:ss'"></td>
                    <td ng-bind="item.endTime|date:'yyyy-MM-dd HH:mm:ss'" ></td>
                    <td>
                        <fun-icon-title title="查看" id="chakan" ng-click="editTable(item)"></fun-icon-title>
                        <!--<fun-Icon id="del-round" ng-click="deleteTable(item)"></fun-Icon>-->
                        <!--  <fun-Icon id="gengduo" ng-click="exectueTable(item)"></fun-Icon>-->
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>